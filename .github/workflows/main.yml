name: build-ios-app
on:
  push:
    branches:
      - 'main'
 
jobs:
  build_001:
    runs-on: macos-latest
    steps:
      #- uses: actions/checkout@v3
      - uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1' # Not needed with a .ruby-version file
          bundler-cache: true # runs 'bundle install' and caches installed gems automatically      
      - run: ruby --version
      - run: gem --version
      - run: bundle --version
      - run: bundle install
      - run: bundle exec fastlane --version
      - run: xcode-select -p
      - run: mdfind "kMDItemCFBundleIdentifier = 'com.apple.dt.Xcode'"
      - run: xcodebuild -version
      - run: sudo xcode-select -s /Applications/Xcode_13.4.1.app
      - run: xcodebuild -version
 
  build_002:
    runs-on: macos-latest
    steps:
      - uses: actions/checkout@v3
      - uses: ruby/setup-ruby@v1
        with:
          ruby-version: '3.1' # Not needed with a .ruby-version file
          bundler-cache: true # runs 'bundle install' and caches installed gems automatically      
      - run: cd Hello-World-iOS
      - run: bundle install
      - run: bundle exec fastlane build_app
 
